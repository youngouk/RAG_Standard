# 개인정보 보호 설정 (통합 PII 모듈)
# 기능: 모든 PII 처리를 단일 설정으로 관리
# 적용 범위: RAG 답변 마스킹, 배치 문서 전처리, API 파일명 마스킹
# 수정일: 2025-12-08 (모듈 통합)

privacy:
  # 전역 활성화 플래그
  # false로 설정 시 모든 PII 마스킹 비활성화
  enabled: false

  # ========================================
  # 공용 화이트리스트 (모든 모드에서 적용)
  # ========================================
  # 화이트리스트 단어: 이 목록의 단어는 이름으로 오인되지 않음
  # 도메인 용어 + 일반 호칭/명사
  whitelist:
    # 도메인별 특화 용어는 사용자가 아래에 추가하십시오.
    # 일반 호칭 (오탐 방지)
    - "담당"
    - "관리자"
    - "직원"
    - "고객"
    - "가족"
    - "친구"
    - "오빠"
    - "언니"
    - "동생"
    - "형님"
    - "누나"
    - "삼촌"
    - "고모"
    - "이모"
    - "사촌"
    # 기술/직함
    - "팀장"
    - "매니저"
    - "대표"
    - "이사"
    - "부장"
    - "과장"
    - "대리"
    - "사원"
    - "주임"
    - "연구원"
    - "교수"
    - "박사"

  # ========================================
  # 마스킹 대상 설정
  # ========================================
  masking:
    # 개인 전화번호 마스킹 (010-XXXX-XXXX)
    # 업체 전화번호(02, 031 등)는 마스킹 안 함
    phone: true

    # 이름 마스킹 (도메인 특화 호칭)
    # 성만 노출: "홍길동 고객" → "홍** 고객"
    name: true

    # 이메일 마스킹 (선택적)
    # 기본 비활성화
    email: false

  # ========================================
  # 마스킹 문자 설정
  # ========================================
  characters:
    phone: "*"  # 010-****-5678
    name: "*"   # 김**

  # ========================================
  # 예외 처리
  # ========================================
  exceptions:
    # 마스킹하지 않을 전화번호 패턴 (업체 문의처)
    phone_prefixes:
      - "02"     # 서울
      - "031"    # 경기
      - "032"    # 인천
      - "033"    # 강원
      - "041"    # 충남
      - "042"    # 대전
      - "043"    # 충북
      - "044"    # 세종
      - "051"    # 부산
      - "052"    # 울산
      - "053"    # 대구
      - "054"    # 경북
      - "055"    # 경남
      - "061"    # 전남
      - "062"    # 광주
      - "063"    # 전북
      - "064"    # 제주

# ========================================
# PII Review System (문서 전처리용)
# ========================================
# 배치 크롤링 시 문서에서 PII 탐지 및 처리
# 참고: whitelist는 상위 privacy.whitelist 사용
review:
  # PII 검토 시스템 활성화
  enabled: false

  # spaCy 모델 설정
  # sm: 15MB (빠름), md: 45MB (균형), lg: 550MB (정확)
  spacy_model: "ko_core_news_sm"

  # NER 탐지 활성화 (false면 Regex만 사용)
  enable_ner: true

  # 문맥 추출 윈도우 크기 (감사용)
  context_window: 30

  # 정책 설정
  policy:
    name: "default"
    quarantine_threshold: 20    # PII 20개 이상 → 격리
    min_confidence: 0.7         # 신뢰도 임계값

    # 엔티티별 처리 방식
    # review: 로그만 기록
    # mask: 마스킹 후 진행
    # block: 처리 중단
    entity_actions:
      phone: "mask"
      email: "mask"
      ssn: "block"              # 주민번호 → 차단
      account: "mask"
      card: "block"             # 카드번호 → 차단
      person_name: "review"     # 이름 → 로그만
      address: "mask"
      organization: "review"

  # 감사 로그 설정
  audit:
    enabled: true
    collection: "pii_audit_logs"
    retention_days: 365         # 1년 보관

# ========================================
# 설정 설명
# ========================================
# 1. 공용 화이트리스트 (privacy.whitelist)
#    - 모든 PII 처리 모드에서 공유
#    - 도메인 용어 + 일반 호칭/명사
#    - 이 목록의 단어는 이름으로 오인되지 않음
#    - 예: "담당자님" → 마스킹 안 함 (담당이 화이트리스트에 포함)
#
# 2. 개인 전화번호 마스킹
#    - 010으로 시작하는 전화번호만 마스킹
#    - 예: 010-1234-5678 → 010-****-5678
#
# 3. 업체 전화번호 비마스킹
#    - 지역번호로 시작하는 전화번호는 마스킹 안 함
#    - 예: 02-123-4567 (업체 문의처) → 그대로 유지
#
# 4. 이름 마스킹
#    - 특정 호칭 앞의 한글 이름 마스킹
#    - 성만 노출: "홍길동 고객" → "홍** 고객"
#    - 화이트리스트 단어는 제외: "관리자님" → 마스킹 안 함
#
# 5. PII Review System (배치 문서용)
#    - 배치 크롤링 문서에서 PII 탐지
#    - spaCy + Regex 하이브리드 탐지
#    - 정책 기반 처리 (마스킹/차단/검토)
#    - 화이트리스트는 상위 privacy.whitelist 참조
