# MCP (Model Context Protocol) 설정
# 기능: LLM이 접근할 수 있는 도구 정의
# 패턴: EmbedderFactory, RerankerFactory와 동일한 설정 구조
#
# 사용 방법:
#   - enabled: true/false로 각 도구를 On/Off
#   - 새 도구 추가: 이 파일에 설정 추가 + tools/ 폴더에 구현

mcp:
  # ========================================
  # 전역 설정
  # ========================================
  enabled: true                     # MCP 기능 전체 On/Off (Task 7에서 활성화)
  server_name: "blank-rag-system"       # MCP 서버 이름
  default_timeout: 30              # 도구 실행 기본 타임아웃 (초)
  max_concurrent_tools: 3          # 동시 실행 가능한 도구 수
  
  # ========================================
  # 도구 설정
  # ========================================
  # 각 도구는 enabled: true/false로 On/Off 가능
  # 새 도구 추가: 여기에 설정 추가 + tools/ 폴더에 구현
  
  tools:
    # ------ 검색 도구 ------
    search_vector_db:
      enabled: true
      description: "벡터 DB에서 정보를 하이브리드 검색합니다"
      timeout: 15
      parameters:
        default_top_k: 10
        alpha: 0.6                 # Dense:BM25 비율
    
    get_document_by_id:
      enabled: true
      description: "문서 ID로 벡터 DB에서 직접 조회합니다"
      timeout: 5
    
    # ------ 메타데이터 검색 도구 ------
    search_metadata:
      enabled: true
      description: "메타데이터 소스에서 정보를 검색합니다"
      timeout: 10
    
    # ------ SQL 검색 도구 ------
    query_sql:
      enabled: true
      description: "자연어 질문을 SQL로 변환하여 메타데이터 DB를 검색합니다"
      timeout: 20
      parameters:
        max_rows: 100
        allowed_tables:
          - "metadata_table"
    
    get_table_schema:
      enabled: false               # 기본 비활성화 (디버깅용)
      description: "테이블 스키마(컬럼 정보)를 조회합니다"
      timeout: 5
  
  # ========================================
  # 에이전트 설정 (Agentic RAG용)
  # ========================================
  agent:
    tool_selection: "llm"          # "llm" | "rule_based"
    selector_model: "google/gemini-2.5-flash-lite"
    max_tool_calls: 5              # 무한 루프 방지
    fallback_tool: "search_vector_db"

