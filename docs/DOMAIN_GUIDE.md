# 도메인 적용 가이드 (Domain Setup Guide) - v3.3.0

Blank RAG 시스템은 코드 수정 없이 **설정 파일(YAML)**과 **데이터 적재**만으로 새로운 비즈니스 도메인에 즉시 적용할 수 있도록 설계되었습니다.

---

## 1. 도메인 전환 4단계

### [Step 1] 지식 베이스 구축 (Data)
`INGESTION.md`를 참고하여 해당 도메인의 문서를 적재합니다.
- **Tip**: GraphRAG를 위해 엔티티 간의 관계가 잘 드러난 문서를 우선 적재하는 것이 좋습니다.

### [Step 2] 핵심 도메인 설정 (`domain.yaml`)
`app/config/features/domain.yaml`에서 시스템의 전역 지식을 정의합니다.
- **Whitelist**: "삼성전자", "SK하이닉스" 등 도메인 고유 명사를 등록하여 PII 마스킹 오탐을 방지합니다.
- **BM25 Settings**: 검색 효율을 위해 도메인별 불용어(Stopwords)와 사용자 사전(User Dictionary)을 등록합니다.

### [Step 3] 지능형 라우팅 규칙 (`routing_rules_v2.yaml`)
`app/config/routing_rules_v2.yaml`에서 질문 분류 기준을 설정합니다.
- **Service Keywords**: 도메인의 핵심 단어(예: "요금", "예약", "사양")를 등록하면, 인사말과 섞인 복합 질문을 지능적으로 분리하여 처리합니다.

### [Step 4] 페르소나 및 프롬프트 (Database)
PostgreSQL의 `prompts` 테이블을 통해 답변 스타일을 조정합니다.
- 전문적인 기술 지원 챗봇, 친절한 고객 응대 챗봇 등 도메인에 맞는 페르소나를 부여할 수 있습니다.

---

## 2. GraphRAG 최적화

v3.3.0부터 지원되는 **지능형 벡터 그래프 검색**을 활용하려면:
1.  엔티티 추가 시 `description` 속성을 풍부하게 작성하세요.
2.  시스템이 자동으로 해당 설명을 임베딩하여, 유사한 의미의 검색어에도 지식 그래프를 탐색할 수 있게 합니다.

---

## 3. 체크리스트
- [ ] `domain.yaml`에 도메인 특화 화이트리스트가 반영되었는가?
- [ ] 서비스 핵심 키워드가 라우팅 규칙에 포함되었는가?
- [ ] 적재된 문서의 벡터 및 그래프 인덱싱이 정상 완료되었는가?
