# =============================================================================
# RAG Standard - 환경변수 예시
# =============================================================================
# 이 파일을 .env로 복사한 후 실제 값을 입력하세요
# cp .env.example .env

# =============================================================================
# 필수 설정 (Required Configuration)
# =============================================================================

# FASTAPI_AUTH_KEY - API 엔드포인트 보호를 위한 인증 키
# 목적: /api/admin/* 및 /api/chat 등 보호된 엔드포인트 접근 인증
# 필수: 예 (운영 환경에서 반드시 설정 필요)
# 기본값: 없음 (설정되지 않으면 모든 요청 거부)
# 예시: your_secure_random_key_here_at_least_32_chars
# 유효 범위: 최소 32자 이상의 무작위 문자열 권장
# 보안: secrets.token_urlsafe(32) 사용 권장
# 연관 설정: 없음
FASTAPI_AUTH_KEY=your_api_auth_key_here

# LLM API 키 - 아래 "LLM Provider" 섹션 참조
# 최소 1개 이상의 LLM Provider API 키가 필요합니다.
# 지원: GOOGLE_API_KEY, OPENAI_API_KEY, ANTHROPIC_API_KEY, OPENROUTER_API_KEY

# =============================================================================
# 벡터 데이터베이스 (Vector Database)
# =============================================================================

# WEAVIATE_URL - Weaviate 벡터 DB 서버 URL
# 목적: 문서 벡터 저장 및 하이브리드 검색 (Dense + BM25)
# 필수: 예 (벡터 검색 기능 사용 시)
# 기본값: http://localhost:8080 (로컬 개발 환경)
# 예시:
#   - 로컬: http://localhost:8080
#   - 프로덕션: https://your-cluster.weaviate.cloud
# 유효 범위: http:// 또는 https://로 시작하는 유효한 URL
# 로컬 실행: docker-compose.weaviate.yml 참고
# 연관 설정: WEAVIATE_API_KEY, WEAVIATE_GRPC_PORT
WEAVIATE_URL=https://your-weaviate-instance.example.com

# WEAVIATE_API_KEY - Weaviate API 키 (선택사항)
# 목적: Weaviate 클라우드 인스턴스 인증
# 필수: 아니오 (로컬 개발 환경에서는 불필요, 클라우드에서는 필수)
# 기본값: 없음
# 예시: your_weaviate_cloud_api_key
# 유효 범위: Weaviate Cloud에서 발급받은 유효한 API 키
# 로컬 개발: 설정하지 않아도 됨
# 연관 설정: WEAVIATE_URL
WEAVIATE_API_KEY=your_weaviate_api_key_if_enabled

# WEAVIATE_GRPC_PORT - Weaviate gRPC 포트
# 목적: 고성능 gRPC 통신을 위한 포트 번호
# 필수: 아니오 (REST API만 사용 시 불필요)
# 기본값: 50051
# 예시: 50051
# 유효 범위: 1024-65535 (비특권 포트)
# 성능: gRPC는 REST보다 약 2-3배 빠름
# 연관 설정: WEAVIATE_URL
WEAVIATE_GRPC_PORT=50051

# MONGODB_URI - MongoDB 연결 문자열
# 목적: 세션 저장 및 벡터 검색 대안 (Weaviate 미사용 시)
# 필수: 아니오 (세션 관리 기능 사용 시 권장)
# 기본값: 없음
# 예시:
#   - 로컬: mongodb://localhost:27017/rag_db
#   - Atlas: mongodb+srv://user:password@cluster.mongodb.net/database
# 유효 범위: 유효한 MongoDB 연결 URI
# 보안: URI에 패스워드 포함 시 .env 파일 권한 주의 (chmod 600)
# 연관 설정: WEAVIATE_URL (대체 관계)
# MONGODB_URI=mongodb+srv://user:password@cluster.mongodb.net/database

# =============================================================================
# LLM Provider (Multi-LLM Factory) - 최소 1개 필수
# =============================================================================
# LLMClientFactory는 4개 Provider를 지원합니다.
# 최소 1개 이상의 API 키를 설정해야 합니다.
#
# 동작 방식:
#   1. config/base.yaml의 llm.default_provider로 주 LLM 선택
#   2. 주 LLM 실패 시 llm.fallback_order 순서대로 자동 폴백
#   3. 예: Google → OpenAI → Anthropic 순서로 시도
#
# 지원 Provider 및 모델:
#   - google: Gemini 2.0 Flash, Gemini Pro (추천: 빠르고 저렴)
#   - openai: GPT-4o, GPT-4o-mini, GPT-5-nano (고품질)
#   - anthropic: Claude Sonnet 4.5, Claude Opus 4.5 (긴 컨텍스트)
#   - openrouter: 300+ 모델 통합 게이트웨이 (유연성)

# GOOGLE_API_KEY - Google Gemini API 키 (권장 기본값)
# 목적: 임베딩 생성, 리랭킹, 답변 생성 등 Gemini 모델 사용
# 필수: 최소 1개 LLM Provider 필요 (Google 권장)
# 기본값: 없음
# 예시: AIzaSyABC123...xyz (39자, 'AIza'로 시작)
# 유효 범위: Google API Console에서 발급받은 유효한 API 키
# 발급 방법: https://makersuite.google.com/app/apikey
# 모델: gemini-2.0-flash-exp (기본), gemini-1.5-pro
# GOOGLE_API_KEY=AIza...your_google_api_key

# OPENAI_API_KEY - OpenAI GPT API 키
# 목적: GPT-4o, GPT-5 등 OpenAI 모델 사용
# 필수: 아니오 (Google API 키 없을 경우 필수)
# 기본값: 없음
# 예시: sk-proj-ABC123...xyz
# 유효 범위: OpenAI Platform에서 발급받은 유효한 API 키
# 발급 방법: https://platform.openai.com/api-keys
# 모델: gpt-4o, gpt-4o-mini, gpt-5-nano
# OPENAI_API_KEY=sk-...your_openai_key

# ANTHROPIC_API_KEY - Anthropic Claude API 키
# 목적: Claude 모델 사용 (긴 컨텍스트 처리에 강점)
# 필수: 아니오
# 기본값: 없음
# 예시: sk-ant-api03-ABC123...xyz
# 유효 범위: Anthropic Console에서 발급받은 유효한 API 키
# 발급 방법: https://console.anthropic.com/
# 모델: claude-sonnet-4-5-20250514, claude-opus-4-5-20251101
# ANTHROPIC_API_KEY=sk-ant-...your_anthropic_key

# OPENROUTER_API_KEY - OpenRouter 통합 게이트웨이 API 키
# 목적: 300+ AI 모델을 단일 API로 사용 (GPT, Claude, Gemini, Llama 등)
# 필수: 아니오
# 기본값: 없음
# 예시: sk-or-v1-ABC123...xyz
# 유효 범위: OpenRouter에서 발급받은 유효한 API 키
# 발급 방법: https://openrouter.ai/keys
# 모델 형식: openai/gpt-4o, anthropic/claude-3.5-sonnet, google/gemini-pro
# 장점: 다양한 모델을 하나의 API 키로 사용, 자동 로드밸런싱
# OPENROUTER_API_KEY=sk-or-...your_openrouter_key

# =============================================================================
# 리랭커 (Rerankers) - 선택사항
# =============================================================================

# JINA_API_KEY - Jina Reranker API 키
# 목적: Gemini 리랭커 실패 시 폴백으로 사용
# 필수: 아니오 (Gemini 리랭커가 주로 사용됨)
# 기본값: 없음
# 예시: jina_ABC123...xyz
# 유효 범위: Jina AI에서 발급받은 유효한 API 키
# 발급 방법: https://jina.ai/embeddings/
# 성능: Gemini > Jina > ColBERT (정확도 기준)
# 연관 설정: GOOGLE_API_KEY (Gemini 리랭커)
# JINA_API_KEY=jina_...your_jina_key

# =============================================================================
# 캐시 (Cache) - 선택사항
# =============================================================================

# REDIS_URL - Redis 캐시 서버 URL
# 목적: 분산 캐시, 세션 공유 (다중 인스턴스 환경)
# 필수: 아니오 (단일 인스턴스면 메모리 캐시로 충분)
# 기본값: 없음 (InMemoryCache 사용)
# 예시:
#   - 로컬: redis://localhost:6379
#   - 비밀번호: redis://:password@localhost:6379
#   - TLS: rediss://user:password@host:6380
# 유효 범위: 유효한 Redis 연결 URL
# 성능: 분산 환경에서 캐시 히트율 30-50% 향상
# 로컬 실행: docker run -d -p 6379:6379 redis:7-alpine
# 연관 설정: 없음
# REDIS_URL=redis://localhost:6379

# =============================================================================
# 데이터베이스 (Database) - 선택사항
# =============================================================================

# DATABASE_URL - PostgreSQL 연결 문자열
# 목적: 프롬프트 히스토리, 사용자 피드백 저장
# 필수: 아니오 (현재 버전에서는 선택사항)
# 기본값: 없음
# 예시: postgresql://user:password@localhost:5432/rag_db
# 유효 범위: 유효한 PostgreSQL 연결 문자열
# 로컬 실행: docker run -d -p 5432:5432 -e POSTGRES_PASSWORD=password postgres:16
# 연관 설정: MONGODB_URI (대체 가능)
# DATABASE_URL=postgresql://user:password@localhost:5432/rag_db

# =============================================================================
# 배치 처리 (Batch Processing) - 선택사항
# =============================================================================

# NOTION_API_KEY - Notion API 통합 토큰
# 목적: Notion 페이지 크롤링 및 데이터 수집
# 필수: 아니오 (Notion 데이터 소스 사용 시만)
# 기본값: 없음
# 예시: secret_ABC123...xyz
# 유효 범위: Notion Integration에서 발급받은 Internal Integration Token
# 발급 방법: https://www.notion.so/my-integrations
# 권한: 읽기 권한만 필요 (Read content)
# 연관 설정: 없음
# NOTION_API_KEY=secret_...your_notion_key

# =============================================================================
# 관찰성 (Observability) - 선택사항
# =============================================================================

# LANGSMITH_API_KEY - LangSmith LLM 트레이싱 API 키
# 목적: LLM 호출 추적, 성능 분석, 디버깅
# 필수: 아니오 (개발/디버깅 시 유용)
# 기본값: 없음
# 예시: ls__ABC123...xyz
# 유효 범위: LangSmith에서 발급받은 유효한 API 키
# 발급 방법: https://smith.langchain.com/
# 기능: 토큰 사용량, 지연시간, 에러율 추적
# 연관 설정: LANGFUSE_* (대체 관계)
# LANGSMITH_API_KEY=ls__...your_langsmith_key

# LANGFUSE_HOST - Langfuse 서버 호스트
# 목적: LLM 관찰성 플랫폼 서버 주소
# 필수: 아니오 (Langfuse 사용 시 필수)
# 기본값: https://cloud.langfuse.com
# 예시:
#   - 클라우드: https://cloud.langfuse.com
#   - 셀프호스팅: https://langfuse.your-domain.com
# 유효 범위: https://로 시작하는 유효한 URL
# 연관 설정: LANGFUSE_PUBLIC_KEY, LANGFUSE_SECRET_KEY
# LANGFUSE_HOST=https://cloud.langfuse.com

# LANGFUSE_PUBLIC_KEY - Langfuse 공개 키
# 목적: Langfuse 프로젝트 식별
# 필수: 아니오 (Langfuse 사용 시 필수)
# 기본값: 없음
# 예시: pk-lf-ABC123...xyz
# 유효 범위: Langfuse 프로젝트 설정에서 확인
# 발급 방법: Langfuse 프로젝트 Settings > API Keys
# 연관 설정: LANGFUSE_HOST, LANGFUSE_SECRET_KEY
# LANGFUSE_PUBLIC_KEY=pk-lf-...

# LANGFUSE_SECRET_KEY - Langfuse 비밀 키
# 목적: Langfuse API 인증
# 필수: 아니오 (Langfuse 사용 시 필수)
# 기본값: 없음
# 예시: sk-lf-ABC123...xyz
# 유효 범위: Langfuse 프로젝트 설정에서 확인
# 보안: 절대 코드에 하드코딩하지 말 것, .env 파일 권한 주의 (chmod 600)
# 발급 방법: Langfuse 프로젝트 Settings > API Keys
# 연관 설정: LANGFUSE_HOST, LANGFUSE_PUBLIC_KEY
# LANGFUSE_SECRET_KEY=sk-lf-...

# =============================================================================
# 시스템 설정 (System Configuration)
# =============================================================================

# ENVIRONMENT - 실행 환경 식별자 (v3.3.1 추가)
# 목적: 환경별 동작 분기 (테스트 시 외부 통신 차단 등)
# 필수: 아니오
# 기본값: production
# 예시: development | test | production
# 유효 범위:
#   - development: 로컬 개발 환경, 상세 로그
#   - test: 테스트 환경, Langfuse 등 외부 통신 차단
#   - production: 운영 환경, 최소 로그
# 동작:
#   - test: Langfuse, LangSmith 등 관찰성 도구 비활성화
#   - development: 디버그 로그 활성화
#   - production: 에러 로그만 활성화
# 연관 설정: LOG_LEVEL, NODE_ENV
ENVIRONMENT=production

# NODE_ENV - Node.js 스타일 환경 변수 (호환성)
# 목적: 레거시 코드 및 일부 라이브러리 호환성
# 필수: 아니오
# 기본값: development
# 예시: development | production
# 유효 범위: development, production
# 참고: ENVIRONMENT 우선 사용 권장
# 연관 설정: ENVIRONMENT
NODE_ENV=development

# LOG_LEVEL - 로그 출력 레벨
# 목적: 로그 상세도 제어
# 필수: 아니오
# 기본값: INFO
# 예시: DEBUG | INFO | WARNING | ERROR
# 유효 범위:
#   - DEBUG: 모든 로그 출력 (개발 환경)
#   - INFO: 정보성 로그 이상 (일반 운영)
#   - WARNING: 경고 이상 (최소 로그)
#   - ERROR: 에러만 출력 (프로덕션)
# 성능: DEBUG는 약 20-30% 성능 저하 가능
# 연관 설정: ENVIRONMENT
LOG_LEVEL=INFO

# HOST - FastAPI 서버 바인딩 호스트
# 목적: 서버가 수신 대기할 네트워크 인터페이스
# 필수: 아니오
# 기본값: 0.0.0.0 (모든 인터페이스)
# 예시:
#   - 모든 인터페이스: 0.0.0.0
#   - 로컬만: 127.0.0.1
# 유효 범위: 유효한 IP 주소 또는 0.0.0.0
# 보안: 외부 노출이 필요 없으면 127.0.0.1 권장
# 연관 설정: PORT
HOST=0.0.0.0

# PORT - FastAPI 서버 포트
# 목적: 서버가 수신 대기할 포트 번호
# 필수: 아니오
# 기본값: 8000
# 예시: 8000
# 유효 범위: 1024-65535 (비특권 포트, 1024 이하는 root 권한 필요)
# 일반적인 포트:
#   - 8000: 개발 환경
#   - 80: HTTP (root 필요)
#   - 443: HTTPS (root 필요)
# 연관 설정: HOST
PORT=8000

# =============================================================================
# Agent 설정 (Agent Configuration)
# =============================================================================

# AGENT_TIMEOUT_SECONDS - Agent 작업 타임아웃 (초)
# 목적: Agent 단일 작업의 최대 실행 시간 제한
# 필수: 아니오
# 기본값: 300 (5분)
# 예시: 300
# 유효 범위: 10 ~ 3600 (10초 ~ 1시간)
#   - 최소: 10초 (간단한 검색)
#   - 권장: 300초 (일반적인 RAG 작업)
#   - 최대: 3600초 (복잡한 분석 작업)
# 주의: 너무 짧으면 정상 작업도 중단될 수 있음
# 성능: LLM API 지연시간에 따라 조정 필요
# 연관 설정: 없음
AGENT_TIMEOUT_SECONDS=300
